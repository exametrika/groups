* Доделать StateTransfer Тесты
* проверить групповые протоколы на потокобезопасность при stop/start. Можно сделать закрытие channel через compartment, чтобы не требовалась синхронизация. По аналогии с gracefull вызывается stop в контексте compartment, проверка на stopped и присваивание stopped = true выполняется до вызова и под синхронизатором, остальные без синхронизации
* LocalSendOptimizationProtocol introduces delays in handling local messages, it is necessary to implement process method in ICompartmentProcessor which is called on each dispatch iteration and move message handling logics into it. How to do it performantly, so only exactly this only protocol gets called, not others
* make GracefullCloseStrategy two phase - request and close phase to consistently close protocols or better make close protocol mechanics based on protocol stop (now some protocols use stop, some - GracefullCloseStrategy, we need single approach)
* прогнать все тесты группы, чтобы работали
* DataExchangeProtocol - сделать простой обмен координатор-группа
* FailureAtomicProtocol - учесть, что StateTransfer Должен быть выше по стеку чем данный протокол
* проблема StateTransferServer.pendingMessages - сейчас используется flow control при переполнении. В тестах он реализован tcp транспортом, в реальной фабрике нужно использовать failure atomic протокол. Кроме того такое решение перекладывает проблему на отправителя. Можно реджектить запросы на переноссостояния если byte rate входящих сообщений запоследние 5 мин больше заданного порога. Можно асинхронно записывать в файл сообщения, а потом проигрывать асинхронно пачками, чтобы дать возможность и другим протоколам параллельно поработать.
--------------
Groups Core:
* сделать тесты groups
  - настроить базовые параметры канала (таймауты и др.) в более короткие интервалы
  - core discovery - протестировать 
    * доделать multicast, azure/aws discovery
  - core failure detection (heartbeat, tcp + node tracking strategies) - сделать тесты
  - core dynamic membership + flush - сделать тесты
  - core state transfer + data exchange - сделать тесты
* atomic multicast
* канал + фабрика канала + конфигурация
  - Доделать GroupChannelFactory
  - расширить параметры фабрики и канала параметрами групповых протоколов
  - перенести из тестовой фабрики из Flush тестов реализацию
* тесты
  - unit тесты
  - интеграционные и perf inprocess тесты
  - распределенное функциональное и perf тестирование на azure, включая механику имитации сбоев (используя tester)
* доп. сервисы (состав расширяемый)

Последовательно тестируем, что уже сделано и формируем канал на базе messaging для распределенного тестирования:
* тесты flush
* тесты state transfer + data exchange
* тесты atomic multicast
* тесты канала
---------------------
DataExchangeProtocol:
- вынести интерфейсы в spi
- возможно отслеживать не текущее, а подготовленное членство, тогда обмен данными для новых узлов пойдет с начала flush, а не с завершения (требуется ли он для новых узлов в течение flush)

